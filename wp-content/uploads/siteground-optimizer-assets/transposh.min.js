!function(a){var e,m,b=t_jp.prefix,f=1,k=0,d=[],h=[],j=0;function s(c,g){clearTimeout(m),d.push(c),h.push(g),function(c,d){if(0!==a.trim(d).length){var e=function(){var c=a(this).attr("id").substr(a(this).attr("id").lastIndexOf("_")+1),d=a("#"+b+"img_"+c);a("#"+b+c).attr("data-source",1),d.removeClass("tr-icon-yellow").removeClass("tr-icon-green").addClass("tr-icon-yellow")};c=c.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),a("*[data-orig='"+c+"'][data-hidden!='y']").html(d).each(e),a("*[data-orig='"+c+"'][data-hidden='y']").attr("data-trans",d).each(e)}}(c,g),m=setTimeout(function(){var b,c={ln0:t_jp.lang,sr0:f,action:"tp_translation",items:d.length};for(b=0;b<d.length;b+=1)c["tk"+b]=d[b],c["tr"+b]=h[b],k+=a("*[data-orig='"+d[b].replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1")+"']").length;a.ajax({type:"POST",url:t_jp.ajaxurl,data:c,success:function(){console.window&&console.log(k+"/"+e+" translations posted")}}),h=[],d=[]},200)}function c(c,d){s(c,a("<div>"+a.trim(d)+"</div>").text()),window.console&&console.log(e-a("."+b+'[data-source=""]').length+"/"+e+" auto translated")}function l(b,c,d){a.ajax({url:t_jp.ajaxurl,dataType:"json",type:"GET",data:{action:"tp_tp",e:"g",tl:d,q:b},success:c})}function g(b,d,e){if(t_jp.msn_key){var c="[";a(b).each(function(a){c+='"'+encodeURIComponent(b[a].replace(/[\\"]/g,"\\$&").replace(/(\r\n|\n|\r)/gm," "))+'",'}),c=c.slice(0,-1)+"]",a.ajax({url:"//api.microsofttranslator.com/V2/Ajax.svc/TranslateArray?appId="+t_jp.msn_key+"&to="+e+"&texts="+c,dataType:"jsonp",jsonp:"oncomplete",success:d})}else 1===j?setTimeout(function(){g(b,d,e)},500):(j=1,a.getScript("//www.microsofttranslator.com/ajax/v2/toolkit.ashx?loc=en&toolbar=none",function(){t_jp.msn_key=_mstConfig.appId,g(b,d,e)}))}function n(b,c,d){a.ajax({url:t_jp.ajaxurl,dataType:"json",type:"GET",data:{action:"tp_tp",e:"y",tl:d,q:b},success:c})}function o(b,c,d){a.ajax({url:t_jp.ajaxurl,dataType:"json",type:"GET",data:{action:"tp_tp",e:"u",tl:d,q:b},success:c})}function p(b,c,d){a.ajax({url:"http://api.apertium.org/json/translate",data:{q:b,langpair:t_jp.olang+"|"+d,markUnknown:"no"},dataType:"jsonp",traditional:!0,success:c})}function q(b,d){t_jp.preferred.some(function(e){if(t_jp.engines[e])return"a"===e&&(h=b,f=3,p(d,function(b){200<=b.responseStatus&&b.responseStatus<300&&(void 0!==b.responseData.translatedText?c(h[0],b.responseData.translatedText):a(b.responseData).each(function(a){200===this.responseStatus&&c(h[a],this.responseData.translatedText)}))},t_jp.lang)),"b"===e&&(m=b,f=2,g(d,function(b){a(b).each(function(a){c(m[a],this.TranslatedText)})},t_jp.blang)),"g"===e&&(k=b,l(d,function(b){a(b.results).each(function(a){c(k[a],this)})},t_jp.lang)),"y"===e&&(j=b,f=4,n(d,function(b){a(b.results).each(function(a){c(j[a],this)})},t_jp.lang)),"u"===e&&(i=b,f=5,o(d,function(b){a(b.results).each(function(a){c(i[a],this)})},t_jp.lang)),!0;var i,j,k,m,h})}function r(){var f=[],e=0,c=[],d=[];a("."+b+'[data-source=""]').each(function(){var g=a(this).attr("data-orig"),b=a(this).attr("data-orig");void 0===b&&(b=a(this).html()),1!==f[b]&&(f[b]=1,1024<e+encodeURIComponent(b).length&&(q(d,c),e=0,c=[],d=[]),e+=encodeURIComponent(b).length,d.push(g),c.push(b))}),q(d,c)}function i(b){"function"==typeof a.xLazyLoader?b():(t_jp.$=a).getScript(t_jp.plugin_url+"/js/lazy.js",b).done(b)}t_jp.dgpt=l,t_jp.dbt=g,t_jp.dyt=n,t_jp.dut=o,t_jp.dat=p,t_jp.at=r,t_jp.tfl=i,t_jp.tfju=function b(c){b.hit?c():(b.hit=!0,i(function(){a.fn.propAttr=a.fn.prop||a.fn.attr,a.xLazyLoader({js:t_jp.jQueryUI+"jquery-ui.min.js",css:t_jp.jQueryUI+"themes/"+t_jp.theme+"/jquery-ui.css",success:c})}))},a(function(){void 0===t_jp.blang&&(t_jp.blang=t_jp.lang),a("."+b+"setdeflang").click(function(){return a.ajax({url:t_jp.ajaxurl,data:{action:"tp_cookie"},cache:!1}),a("."+b+"setdeflang").hide("slow"),!1}),e=a("."+b+'[data-source=""]').length,a.ajaxSetup({cache:!0}),!e||t_jp.noauto||a.isEmptyObject(t_jp.engines)||r(),t_jp.edit&&a.getScript(t_jp.plugin_url+"/js/transposhedit.js")})}(jQuery)